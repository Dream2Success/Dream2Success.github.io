!function o(i,a,l){function c(t,e){if(!a[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}var r=a[t]={exports:{}};i[t][0].call(r.exports,function(e){return c(i[t][1][e]||e)},r,r.exports,o,i,a,l)}return a[t].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({"/root/developmentseed.github.com/app/assets/scripts/dropdowns.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){$('[data-toggle="drop"]:not(.drop--processed)').click(function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("drop--processed");var t=$(this).parents(".drop");t.toggleClass("drop--open"),$(".drop.drop--open").not(t).removeClass("drop--open")}),$("body:not(.drop-processed)").each(function(){$(this).addClass("drop--processed"),$(document).click(function(){$(".drop.drop--open").removeClass("drop--open")})})}},{}],"/root/developmentseed.github.com/app/assets/scripts/ejs-helpers.js":[function(e,t,n){"use strict";window.DSO=DSO||{},window.partial=DSO.partial=function(e,t){return JST[e+".ejs"](t)},DSO.widont=function(e,t){t=t||18;var n=(e=e.replace(/&nbsp;([^\s]+)$/," $1")).split(" ");if(n.length>1){var s=n.length,r=(n[s-1]+" "+n[s-2]).length;if("always"===t||r<t)return e.replace(/\s([^\s]+)\s*$/,"&nbsp;$1")}return e}},{}],"/root/developmentseed.github.com/app/assets/scripts/main.js":[function(e,t,n){"use strict";var s=l(e("./views/search")),r=l(e("./views/projects")),o=l(e("./views/projects-map")),i=l(e("./dropdowns")),a=e("./submenu-scroll-nav");function l(e){return e&&e.__esModule?e:{default:e}}window.jQuery=e("jquery"),window.$=window.jQuery,e("jquery-ui-dist/jquery-ui"),window._=e("underscore"),e("./touch-proxy"),e("./templates"),e("./ejs-helpers"),DSO.Views={Projects:r.default,ProjectsMap:o.default,Search:s.default},$(function(){(0,i.default)(),DSO.Views.Search({container:$("[data-search-container]")}),$(document).keyup(function(e){var t=null;switch(e.keyCode){case 39:t=$("[data-pager-next]:not(.disabled)");break;case 37:t=$("[data-pager-prev]:not(.disabled)")}!$("body").hasClass("search-on")&&t&&t.length&&t[0].click()}),$("[data-global-menu]").click(function(e){e.preventDefault(),$("body").toggleClass("global-menu-on")}),(0,a.activateScrollableNav)(),$(window).resize(a.scollableNavResize)})},{"./dropdowns":"/root/developmentseed.github.com/app/assets/scripts/dropdowns.js","./ejs-helpers":"/root/developmentseed.github.com/app/assets/scripts/ejs-helpers.js","./submenu-scroll-nav":"/root/developmentseed.github.com/app/assets/scripts/submenu-scroll-nav.js","./templates":"/root/developmentseed.github.com/app/assets/scripts/templates.js","./touch-proxy":"/root/developmentseed.github.com/app/assets/scripts/touch-proxy.js","./views/projects":"/root/developmentseed.github.com/app/assets/scripts/views/projects.js","./views/projects-map":"/root/developmentseed.github.com/app/assets/scripts/views/projects-map.js","./views/search":"/root/developmentseed.github.com/app/assets/scripts/views/search.js",jquery:"jquery","jquery-ui-dist/jquery-ui":"jquery-ui-dist/jquery-ui",underscore:"underscore"}],"/root/developmentseed.github.com/app/assets/scripts/submenu-scroll-nav.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scollableNavResize=void 0,n.activateScrollableNav=function(){$('[data-hook="scrollable-nav"]').draggable({axis:"x",scroll:!1,stop:l}),$('[data-hook="scrollable-nav"]').each(function(){l.call(this)}),setTimeout(function(){i()},1)};var s,r=e("underscore"),o=(s=r)&&s.__esModule?s:{default:s};function i(){$('[data-hook="scrollable-nav"] .nav__link--active').each(function(){var e=$(this).parent(),t=e.parents('[data-hook="scrollable-nav"]'),n=t.parent().outerWidth(),s=t.outerWidth();if(!(s<=n)){var r=s-n,o=e.position().left+e.outerWidth(!0)/2-n/2;o<0&&(o=0),o>r&&(o=r),t.animate({left:-o},400,"easeOutExpo")}})}var a=o.default.debounce(i,3500);function l(){var e=$(this),t=e.parent().outerWidth(),n=e.outerWidth();if(n<=t){var s=t/2-n/2;e.animate({left:s},400,"easeOutExpo")}else{var r=e.position().left;r>0&&e.animate({left:0},400,"easeOutExpo"),r<t-n&&e.animate({left:t-n},400,"easeOutExpo")}a()}n.scollableNavResize=o.default.debounce(function(){$('[data-hook="scrollable-nav"]').each(function(){l.call(this)}),i()},100)},{underscore:"underscore"}],"/root/developmentseed.github.com/app/assets/scripts/templates.js":[function(e,t,n){"use strict";window.JST=window.JST||{},window.JST["map-popup.ejs"]=function(e){var t,n="",s=_.escape;return Array.prototype.join,n+='<article class="popover">\n  <header class="popover__header">\n    ',e.client.name&&(n+='\n    <p class="popover__subtitle">\n\n      ',"Development Seed"==e.client.name?(n+="\n        ",e.client.url?n+='\n          A <a href="'+s(e.client.url)+'" title="View more">labs</a> project\n          ':n+="\n            Development Seed Labs\n          ",n+="\n      "):e.client.url?n+='\n        With <a href="'+s(e.client.url)+'" title="View more">'+s(e.client.name)+"</a>\n      ":n+="\n        With "+s(e.client.name)+"\n      ",n+="\n\n    </p>\n    "),n+='\n\n    <h1 class="popover__title"><a href="'+s(e.url)+'" title="View more">'+(null==(t=DSO.widont(e.title))?"":t)+"</a></h1>\n  </header>\n</article>\n"},window.JST=window.JST||{},window.JST["map.ejs"]=function(e){var t="";return Array.prototype.join,t+='<div class="inpage__body inpage__body--map-container">\n  ',e.features&&e.features.length||(t+='\n  <div class="empty-message">\n    <p>No content was found matching your criteria. Please refine your search.</p>\n  </div>\n  '),t+='\n  <div id="map"></div>\n</div>\n'},window.JST=window.JST||{},window.JST["projects-card.ejs"]=function(e){var t,n="",s=_.escape;return Array.prototype.join,n+='<article class="card project--short">\n  <div class="card__contents">\n    ',e.media.card.url&&(n+='\n    <figure class="card__media">\n      <a title="View more" class="link-wrapper" href="'+s(e.url)+'">\n        <div class="card__cover">\n          <img alt="Card thumb" width="1280" height="640" src="'+s(e.media.card.url)+'" />\n        </div>\n      </a>\n    </figure>\n    '),n+='\n    <header class="card__header">\n      <div class="card__headline">\n        <a title="View card content" class="link-wrapper" href="'+s(e.url)+'">\n          <h1 class="card__title">'+(null==(t=DSO.widont(e.title))?"":t)+"</h1>\n        </a>\n        ",e.client.name&&(n+='\n        <p class="card__subtitle">\n          ',"Development Seed"==e.client.name?(n+="\n            ",e.client.url?n+='\n              A <a href="'+s(e.client.url)+'" title="View more">labs</a> project\n              ':n+="\n                Development Seed Labs\n              ",n+="\n          "):e.client.url?n+='\n            With <a href="'+s(e.client.url)+'" title="View more">'+s(e.client.name)+"</a>\n          ":n+="\n            With "+s(e.client.name)+"\n          ",n+="\n        </p>\n        "),n+="\n      </div>\n    </header>\n    ",e.introduction&&(n+='\n    <div class="card__body">\n      <div class="card__prose">\n        <p>'+(null==(t=DSO.widont(e.introduction))?"":t)+"</p>\n      </div>\n    </div>\n    "),n+="\n    ",e.topics.length&&(n+='\n    <footer class="card__footer">\n      <dl class="card__details-list">\n        <dt>Topics:</dt>\n        ',_.each(e.topics.sort(),function(e){n+='\n        <dd><a href="'+s(DSO.baseUrl)+"/projects/?topic="+s(e.toLowerCase())+'" title="View content by topic" class="topic">'+s(e)+"</a></dd>\n        "}),n+="\n      </dl>\n    </footer>\n    "),n+="\n  </div>\n</article>\n"},window.JST=window.JST||{},window.JST["projects-filters.ejs"]=function(n){var s="",r=_.escape;Array.prototype.join,s+='<h3 class="nav__label">Topics:</h3>\n<div class="drop drop--down drop--align-left drop--filters">\n  <a href="#" class="nav__link drop__toggle drop__toggle--caret" title="Change topic" data-toggle="drop"><span>'+r(n.filters.topic||"All")+'</span></a>\n  <div class="drop__content">\n    <div class="drop__scollarea">\n      <ul class="drop__menu drop__menu--select" role="menu">\n        ';var e=null===n.filters.topic?"drop__menu-item--active":"";s+='\n        <li><a href="'+r(n.urlWithFilters("topic"))+'" class="drop__menu-item '+r(e)+'" title="Select topic"><span>All</span></a></li>\n        ',_.each(n.topics,function(e){s+="\n        ";var t=n.filters.topic===e?"drop__menu-item--active":"";s+='\n        <li><a href="'+r(n.urlWithFilters("topic",e))+'" class="drop__menu-item '+r(t)+'" title="Select topic"><span>'+r(e)+"</span></a></li>\n        "}),s+='\n      </ul>\n    </div>\n  </div>\n</div>\n\n<h3 class="nav__label">Display:</h3>\n<ul class="nav__tablist" role="tablist">\n  ';var t=null===n.filters.view?"nav__link--active":"";return s+='\n  <li class="nav__tab" role="presentation">\n    <a href="'+r(n.urlWithFilters("view"))+'" class="nav__link '+r(t)+'" title="Change view" role="tab"><span>Grid</span></a>\n  </li>\n  ',t="map"===n.filters.view?"nav__link--active":"",s+='\n  <li class="nav__tab" role="presentation">\n    <a href="'+r(n.urlWithFilters("view","map"))+'" class="nav__link '+r(t)+'" title="Change view" role="tab"><span>Map</span></a>\n  </li>\n</ul>\n'},window.JST=window.JST||{},window.JST["projects-grid.ejs"]=function(e){var t,n="",s=_.escape;return Array.prototype.join,n+='<div class="inpage__body">\n  <div class="inner">\n    ',e.loading?n+='\n    <div class="loading-pane">\n      <div class="spinner">\n        <div class="spinner__bounce"></div>\n        <div class="spinner__bounce"></div>\n        <div class="spinner__bounce"></div>\n      </div>\n    </div>\n    ':e.posts.length?(n+='\n    <ol class="card-list card-list--projects">\n      ',_.each(e.posts,function(e){n+='\n      <li class="card-list__item">\n        '+(null==(t=partial("projects-card",e))?"":t)+"\n      </li>\n      "}),n+="\n    </ol>\n    "):n+='\n    <div class="empty-message">\n      <p>No content was found matching your criteria. Please refine your search.</p>\n    </div>\n    ',n+="\n  </div>\n</div>\n\n",e.posts.length&&(n+='\n<footer class="inpage__footer">\n  <div class="inner">\n    <nav class="inpage__footer-actions" role="navigation">\n      <p class="summary">Showing '+s(e.count.showing)+" of "+s(e.count.total)+" ","blog"==e.type?n+=" posts ":"project"==e.type&&(n+=" projects "),n+='</p>\n      <p><a href="#" class="ipfa-load '+(null==(t=!e.more||e.loading?"disabled":"")?"":t)+'" data-load-more><span>Load more</span></a></p>\n    </nav>\n  </div>\n</footer>\n'),n+="\n"},window.JST=window.JST||{},window.JST["search-results.ejs"]=function(t){var n,s="",r=_.escape;return Array.prototype.join,null===t.term?s+='\n  <div class="search__message--null">\n    <p>What are you looking for today?</p>\n  </div>\n':0===t.results.length?s+='\n  <div class="search__message--null">\n    <p>No results available for <i>'+r(t.term)+"</i>. Please refine your search.</p>\n  </div>\n":(s+='\n<ul class="result-list">\n  ',_.forEach(t.results,function(e){s+='\n  <li class="result-list__item">\n    <article class="result">\n      <a href="'+(null==(n=e.url)?"":n)+'" title="View">\n        <p class="result__subtitle">'+r(e.type)+'</p>\n        <h1 class="result__title">'+(null==(n=t.highlight(e.title))?"":n)+'</h1>\n        <div class="result__introduction">\n          <p>'+(null==(n=t.highlight(e.introduction))?"":n)+"</p>\n        </div>\n      </a>\n    </article>\n  </li>\n  "}),s+="\n</ul>\n"),s+="\n"},window.JST=window.JST||{},window.JST["search.ejs"]=function(e){return'<button type="button" class="search__dismiss" title="Close" data-search-close><span>Dismiss</span></button>\n<header class="search__header">\n  <div class="inner">\n    <h1 class="search__title">Search</h1>\n    <form name="search-form" class="search__form">\n      <input type="text" class="search__input" placeholder="Search" data-search-query />\n    </form>\n  </div>\n</header>\n<div class="search__body">\n  <div class="inner" data-search-results>\x3c!-- Template: search-results.ejs --\x3e</div>\n</div>\n'}},{}],"/root/developmentseed.github.com/app/assets/scripts/touch-proxy.js":[function(e,t,n){"use strict";!function(){function e(e){var t=e.changedTouches[0],n="";switch(e.type){case"touchstart":n="mousedown";break;case"touchmove":n="mousemove";break;case"touchend":n="mouseup";break;default:return}var s=document.createEvent("MouseEvent");s.initMouseEvent(n,!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(s)}document.addEventListener("touchstart",e,!0),document.addEventListener("touchmove",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("touchcancel",e,!0)}()},{}],"/root/developmentseed.github.com/app/assets/scripts/utils.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.parseQuery=function(e){for(var t={},n=("?"===e[0]?e.substr(1):e).split("&"),s=0;s<n.length;s++){var r=n[s].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]||"")}return t}},{}],"/root/developmentseed.github.com/app/assets/scripts/views/projects-map.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){this.container=e.container;var t=this,s={},o=JST["map.ejs"],i=JST["map-popup.ejs"];this.init=function(){a.default.mapbox.accessToken="pk.eyJ1IjoibmF0ZSIsImEiOiItQjVUSm8wIn0.B_AesFQdWjmbfnMWPhV0eg",this.requestAndRender()},this.requestAndRender=function(){t.request(function(){t.render()})},this.getFilters=function(){var e={topic:null,view:null},t=window.location.search;return t&&((t=(0,l.parseQuery)(t)).topic&&(e.topic=t.topic.toLowerCase()),t.view&&(e.view=t.view.toLowerCase())),e},this.getFilteredData=function(){var n=this.getFilters();if(null===n.topic)return s;var e=JSON.parse(JSON.stringify(s));return e.features=e.features.filter(function(e){var t=e.properties.topics.map(function(e){return e.toLowerCase()});return!n.topic||-1!==t.indexOf(n.topic.toLowerCase())}),e},this.request=function(t){$.ajax({url:"/api/map.geojson",dataType:"json"}).done(function(e){t(s=e)})},this.render=function(e){var t=this.getFilters();if("map"===t.view){var n=this.getFilteredData();this.container.html(o({features:n.features}));var s=a.default.mapbox.map(document.getElementById("map"),"nate.lb3lk12d",{zoomControl:!1,minZoom:2,maxZoom:5,maxBounds:a.default.latLngBounds([-90,-180],[90,180]),tileLayer:{continuousWorld:!0}}).setView([38.1089,13.3545],2);s.scrollWheelZoom.disable(),s.doubleClickZoom.disable();var r=a.default.mapbox.featureLayer(n);r.eachLayer(function(e){var t=e.feature.properties,n=["marker"];t.type&&n.push(t.type),t.highlight&&n.push("highlight");var s=a.default.divIcon({className:n.join(" "),iconSize:[],popupAnchor:[0,0],html:"<span></span>"});e.setIcon(s),e.on("popupopen",function(e){var t=parseInt($(e.target._icon).css("margin-top").replace("px",""),10)-16;e.popup.options.offset.y=t,e.popup.update()}),e.bindPopup(i(t))}),s.addLayer(r)}else this.container.html("")},this.addEventListeners=function(){},this.init()};var s,r=e("mapbox.js"),a=(s=r)&&s.__esModule?s:{default:s},l=e("../utils")},{"../utils":"/root/developmentseed.github.com/app/assets/scripts/utils.js","mapbox.js":"mapbox.js"}],"/root/developmentseed.github.com/app/assets/scripts/views/projects.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){this.container=e.container,this.filtersContainer=e.filtersContainer;var o=[],t=this,i=JST["projects-grid.ejs"],a=JST["projects-filters.ejs"],l=1;this.init=function(){this.requestAndRender()},this.requestAndRender=function(){t.render(!0),t.request(function(){t.render()})},this.getFilters=function(){var e={topic:null,view:null},t=window.location.search;return t&&((t=(0,r.parseQuery)(t)).topic&&(e.topic=t.topic.toLowerCase()),t.view&&(e.view=t.view.toLowerCase())),e},this.getFilteredPosts=function(){var n=this.getFilters();return null===n.topic?o:o.filter(function(e){var t=e.topics.map(function(e){return e.toLowerCase()});return!n.topic||-1!==t.indexOf(n.topic.toLowerCase())})},this.request=function(t){$.ajax({url:"/api/projects.json",dataType:"json"}).done(function(e){t(o=e)})},this.render=function(e){e=e||!1;var r=this.getFilters();if("map"!==r.view){var t=this.getFilteredPosts(),n=t.slice(0,9*l);this.container.html(i({posts:n,loading:e,type:"project",more:t.length>n.length,count:{total:t.length,showing:n.length}}))}var s=[];o.forEach(function(e){e.topics.forEach(function(e){-1===s.indexOf(e.toLowerCase())&&s.push(e.toLowerCase())})}),this.filtersContainer.html(a({filters:r,topics:s,urlWithFilters:function(e,t){t=t||null;var n=[];for(var s in null!==t&&n.push(e+"="+t),r)null!==r[s]&&s!==e&&n.push(s+"="+r[s]);return DSO.baseUrl+"/projects/"+(n.length>0?"?"+n.join("&"):"")}})),this.addEventListeners(),(0,u.activateScrollableNav)(),(0,c.default)()},this.addEventListeners=function(){this.container.find("[data-load-more]").click(function(e){e.preventDefault(),l++,t.render()})},this.init()};var s,r=e("../utils"),o=e("../dropdowns"),c=(s=o)&&s.__esModule?s:{default:s},u=e("../submenu-scroll-nav")},{"../dropdowns":"/root/developmentseed.github.com/app/assets/scripts/dropdowns.js","../submenu-scroll-nav":"/root/developmentseed.github.com/app/assets/scripts/submenu-scroll-nav.js","../utils":"/root/developmentseed.github.com/app/assets/scripts/utils.js"}],"/root/developmentseed.github.com/app/assets/scripts/views/search.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){this.container=e.container,this.resContainer=null;var n=[],s=this,t=JST["search.ejs"],r=JST["search-results.ejs"];this.init=function(){this.request(),this.render()},this.request=function(){$.ajax({url:"/api/search.json",dataType:"json"}).done(function(e){(n=e).forEach(function(e){e.searchable=(e.title+e.introduction).toLowerCase()})})},this.render=function(){this.container.html(t()),this.resContainer=this.container.find("[data-search-results]"),this.renderResults(null,[]),this.addEventListeners()},this.renderResults=function(n,e){this.resContainer.html(r({term:n,results:e.slice(0,16),highlight:function(t){if(n){var e=s.extractSearchWords(n);o.default.forEach(e,function(e){t=t.replace(new RegExp("("+e+")","gi"),"<i>$1</i>")})}return t}}))},this.addEventListeners=function(){this.container.find("[data-search-query]").on("keyup",function(e){var t=$(this).val();if(t.length>2){var n=s.search(t);s.renderResults(t,n)}else s.renderResults(null,[])}),this.container.find("[data-search-query]").parents("form").on("submit",function(e){e.preventDefault()}),$("body").on("keyup",function(e){$("body").hasClass("search-on")&&27===e.keyCode&&s.closeSearch()}),$("[data-search-open]").on("click",function(e){e.preventDefault(),s.openSearch()}),this.container.find("[data-search-close]").on("click",function(e){e.preventDefault(),s.closeSearch()})},this.openSearch=function(){s.container.addClass("revealed"),$("body").addClass("search-on"),setTimeout(function(){s.container.find("[data-search-query]").focus()},250)},this.closeSearch=function(){s.container.removeClass("revealed"),s.container.find("[data-search-query]").blur(),$("body").removeClass("search-on")},this.extractSearchWords=function(e){var t=e.toLowerCase().match(/(\w+)/g);return o.default.filter(t,function(e){return e.length>2})},this.search=function(e){var s=this.extractSearchWords(e),t=o.default.filter(n,function(e){for(var t in s){var n=s[t];if(-1===e.searchable.indexOf(n))return!1}return!0});return t},this.init()};var s,r=e("underscore"),o=(s=r)&&s.__esModule?s:{default:s}},{underscore:"underscore"}]},{},["/root/developmentseed.github.com/app/assets/scripts/main.js"]);